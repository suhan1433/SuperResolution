# 발생한 문제점 및 추후 계획

---

## 문제1. Jenkins에서 포트 충돌

```
Error response from daemon: driver failed programming external connectivity on endpoint rolling-server-web (61ceb975c1251d46dc28429a1d0c36907f74a5bca028593dfabf42eb59ffe601): Bind for 0.0.0.0:80 failed: port is already allocated

Build step 'Execute shell' marked build as failure

```

- Jenkins에서 실행 시 외부 포트와 내부 포트를 확인 및 netstat, doker ps -a 를 통해 현재 사용하려는 포트와 충돌이 일어나는지 확인 .

## 문제2. 이미지 퀄리티가 좋지 못하다

PNG 방식으로 저장할 시 이미지가 커서 DB에 저장 할 수 없다.

이를 JPEG로 바꿀 경우 손실 압축으로 인해 이미지 퀄리티가 떨어진다

→ 파일 서버를 두어 경로만 DB에 저장할 필요 있다 

## 문제3.  하나의 HostOS가 종료 되면 서비스에 지장이 간다.

현재 Nginx를 통해 라운드로빈 방식으로 하나의 컨테이너가 종료되더라도 서비스에 지장이 가지 않도록 설정해놓은 상태 →  단일 컨테이너의 장애가 다른 서비스에 영향을 미치지 않도록 하는 방식입니다.

하지만, 만약 **HostOS** (호스트 운영 체제)에서 문제가 발생한다면, 해당 호스트에서 실행 중인 모든 컨테이너가 영향을 받아 서비스가 중단될 수 있다. → 이는 가용성을 떨어뜨리고 서비스의 신뢰성을 낮추는 문제

따라서, 여러 **HostOS**를 사용해 장애 발생 시에도 서비스를 계속 제공할 수 있도록 시스템을 설계해야 한다. 이를 위해 **오케스트레이션** 도구를 사용하여 여러 HostOS에 걸쳐 서비스를 분산시키고, 각 호스트의 상태를 모니터링하며, 문제가 발생했을 때 자동으로 장애 복구가 이루어지도록 해야 함.

## 추후 진행

1. 파일 서버를 만들어 DB에는 파일 서버 경로만을 연결하여 이미지 퀄리티를 높여야한다
2. 오케스트레이션을 도입하여 단일 HostOS의 한계를 막아야 한다.
